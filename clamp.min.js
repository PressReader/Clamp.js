/*!
* Clamp.js 0.5.1
*
* Copyright 2011-2013, Joseph Schmitt http://joe.sh
* Released under the WTFPL license
* http://sam.zoy.org/wtfpl/
*/
!function(){function a(a,b){function l(a,b){return d.getComputedStyle||(d.getComputedStyle=function(a){return this.el=a,this.getPropertyValue=function(b){var c=/(\-([a-z]){1})/g;return"float"==b&&(b="styleFloat"),c.test(b)&&(b=b.replace(c,function(){return arguments[2].toUpperCase()})),a.currentStyle&&a.currentStyle[b]?a.currentStyle[b]:null},this}),d.getComputedStyle(a,null).getPropertyValue(b)}function m(b){var c=b||a.clientHeight,d=o(a);return Math.max(Math.floor(c/d),0)}function n(b){var c=o(a);return c*b}function o(a){var b=l(a,"line-height");return"normal"==b&&(b=1.2*parseInt(l(a,"font-size"))),parseInt(b)}function t(b){return b.lastChild.children&&b.lastChild.children.length>0?t(Array.prototype.slice.call(b.children).pop()):b.lastChild&&b.lastChild.nodeValue&&""!=b.lastChild.nodeValue&&b.lastChild.nodeValue!=e.truncationChar?b.lastChild:(b.lastChild.parentNode.removeChild(b.lastChild),t(a))}function u(b,c){function d(){p=e.splitOnChars.slice(0),q=p[0],r=null,s=null}if(c){var f=b.nodeValue.replace(e.truncationChar,"");if(r||(q=p.length>0?p.shift():"",r=f.split(q)),r.length>1?(s=r.pop(),v(b,r.join(q))):r=null,k&&(b.nodeValue=b.nodeValue.replace(e.truncationChar,""),a.innerHTML=b.nodeValue+" "+k.innerHTML+e.truncationChar),r){if(a.clientHeight<=c){if(!(p.length>=0&&""!=q))return a.innerHTML;v(b,r.join(q)+q+s),r=null}}else""==q&&(v(b,""),b=t(a),d());return e.animate?(setTimeout(function(){u(b,c)},e.animate===!0?10:e.animate),void 0):u(b,c)}}function v(a,b){a.nodeValue=b+e.truncationChar}b=b||{};var k,d=window,e={clamp:b.clamp||2,useNativeClamp:"undefined"!=typeof b.useNativeClamp?b.useNativeClamp:!0,splitOnChars:b.splitOnChars||[".","-","\u2013","\u2014"," "],animate:b.animate||!1,truncationChar:b.truncationChar||"\u2026",truncationHTML:b.truncationHTML},f=a.style,g=a.innerHTML,h="undefined"!=typeof a.style.webkitLineClamp,i=e.clamp,j=i.indexOf&&(i.indexOf("px")>-1||i.indexOf("em")>-1);e.truncationHTML&&(k=document.createElement("span"),k.innerHTML=e.truncationHTML);var r,s,p=e.splitOnChars.slice(0),q=p[0];"auto"==i?i=m():j&&(i=m(parseInt(i)));var w;if(h&&e.useNativeClamp)f.overflow="hidden",f.textOverflow="ellipsis",f.webkitBoxOrient="vertical",f.display="-webkit-box",f.webkitLineClamp=i,j&&(f.height=e.clamp+"px");else{var x=n(i);x<=a.clientHeight&&(w=u(t(a),x))}return{original:g,clamped:w}}"function"==typeof define&&define.amd?define("clamp",[],function(){return a}):window.$clamp=a}();